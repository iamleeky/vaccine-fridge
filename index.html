<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>LG전자 친환경적정기술연구회</title>

    <!-- LINK CSS -->
    <link rel="stylesheet" type="text/css" href="css/styles.css">

    <!-- EXTERNAL LIBS-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="https://www.google.com/jsapi"></script>

    <!-- EXAMPLE SCRIPT -->
    <script>
        // onload callback
        function drawChart() {
            var cloud_url = 'https://data.sparkfun.com/output/';
            // Public Key from https://data.sparkfun.com
            var public_key = 'RM7ZbRb8zGidnAQKNZly';
            // JSONP request
            var jsonData = $.ajax({
                url: cloud_url + public_key + '.json',
                data: {
                    page: 1
                },
                dataType: 'jsonp',
            }).done(function(results) {
                var latest = results[0];
                var gauge = new google.visualization.Gauge($('#gauge').get(0));
                var gaugeData = google.visualization.arrayToDataTable([
                    ['Label', 'Value'],
                    ['온도', 0],
                    ['습도', 0],

                ]);
                var options = {
                    width: 600,
                    redFrom: 90,
                    redTo: 100,
                    yellowFrom: 80,
                    yellowTo: 90,
                    greenFrom: 70,
                    greenTo: 80,
                    minorTicks: 5
                };
                // For animation purpose only
                gauge.draw(gaugeData, options);
                // Show real data
                gaugeData.setValue(0, 1, parseFloat(latest.temp));
                gaugeData.setValue(1, 1, parseFloat(latest.hum));

                gauge.draw(gaugeData, options);
                var data = new google.visualization.DataTable();
                data.addColumn('datetime', 'Time');
                data.addColumn('number', 'Temp');
                data.addColumn('number', 'Humidity');

                $.each(results, function(i, row) {
                    data.addRow([
                        (new Date(row.timestamp)),
                        parseFloat(row.temp),
                        parseFloat(row.humidity),

                    ]);
                });
                var chart = new google.visualization.LineChart($('#temperature').get(0));
                chart.draw(data, {
                    title: '백신냉장고 온도'
                });
            });
        }
        // load chart lib
        google.load('visualization', '1', {
            packages: ['corechart', 'gauge']
        });
        // call drawChart once google charts is loaded
        google.setOnLoadCallback(drawChart);

        // handle period selection
        $(function() {
            $("#dayperiod").click(function() {
                alert("view day");
            });

            $("#weekperiod").click(function() {
                alert("view week");
            });

            $("#monthperiod").click(function() {
                alert("view month");
            });
        });
    </script>
</head>

<body>
    <h1>백신냉장고 온도감시기</h1>
    <h2>위성통신을 이용한 원격 감시  -  LG전자 친환경 적정기술 연구회</h2>
    <div id="gauge" style="width:600px;margin-left:auto;margin-right:auto"></div>
    <div id="temperature" style="width: 100%;"></div>
    <div id="period">
        <input type="radio" id="dayperiod" name="period"><label for="dayperiod">최근 1일</label>
        <input type="radio" id="weekperiod" name="period" checked><label for="weekperiod">최근 1주일</label>
        <input type="radio" id="monthperiod" name="period"><label for="monthperiod">최근 1달</label>
    </div>
</body>

</html>
